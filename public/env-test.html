<!DOCTYPE html>
<html>
<head>
    <title>Environment Variables Test</title>
</head>
<body>
    <h1>Environment Variables Test</h1>
    <div id="output"></div>
    <script type="module">
        const output = document.getElementById('output');
        const env = {
            VITE_SUPABASE_URL: import.meta.env.VITE_SUPABASE_URL,
            VITE_SUPABASE_ANON_KEY: import.meta.env.VITE_SUPABASE_ANON_KEY ? 'SET (hidden)' : 'NOT SET',
            VITE_API_URL: import.meta.env.VITE_API_URL
        };

        output.innerHTML = '<pre>' + JSON.stringify(env, null, 2) + '</pre>';

        // Also test Supabase connection
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';

        if (env.VITE_SUPABASE_URL && import.meta.env.VITE_SUPABASE_ANON_KEY) {
            const supabase = createClient(import.meta.env.VITE_SUPABASE_URL, import.meta.env.VITE_SUPABASE_ANON_KEY);

            const { data, error } = await supabase.from('posts').select('*').limit(1);

            if (error) {
                output.innerHTML += '<h2>Supabase Error:</h2><pre>' + JSON.stringify(error, null, 2) + '</pre>';
            } else {
                output.innerHTML += '<h2>Supabase Success!</h2><pre>Found ' + (data?.length || 0) + ' posts</pre>';
            }
        } else {
            output.innerHTML += '<h2 style="color: red;">Environment variables NOT SET!</h2>';
        }
    </script>
</body>
</html>
